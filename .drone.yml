clone:
  git:
    image: plugins/git:next

workspace:
  base: /test
  path: downstream

services:
  web:
    image: fpfis/php71-build
    environment:
      - TOOLKIT_ENV_PROPS=/test/downstream/vendor/ec-europa/toolkit/includes/phing/props/drone.props

pipeline:

  composer:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    commands:
      - export CHECKSUM=$(md5sum composer.lock | cut -d ' ' -f 1)
      - tar -xzf /cache/composer/$${CHECKSUM}.tar.gz || composer install --ansi --no-suggest && tar -czf /cache/composer/$${CHECKSUM}.tar.gz ./vendor/
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  encasia-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-1
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/encasia-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/encasia-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  ener-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-1
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/ener-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/ener-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  enrd-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-1
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/enrd-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/enrd-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  env-efe-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-1
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/env-efe-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/env-efe-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  eurydice-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-1
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/eurydice-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/eurydice-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  eusdgs-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-1
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/eusdgs-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/eusdgs-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  eusinglesky-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-1
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/eusinglesky-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/eusinglesky-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  euvp-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-1
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/euvp-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/euvp-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  ewrc-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-1
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/ewrc-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/ewrc-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  expert-pane-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-1
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/expert-pane-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/expert-pane-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  eych-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-1
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/eych-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/eych-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  farnet-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-1
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/farnet-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/farnet-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  food-animals-plants-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-2
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/food-animals-plants-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/food-animals-plants-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  fpi-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-2
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/fpi-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/fpi-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  fra-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-2
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/fra-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/fra-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  futurium-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-2
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/futurium-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/futurium-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  globalstrategy-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-2
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/globalstrategy-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/globalstrategy-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  grid-communications-toolkit-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-2
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/grid-communications-toolkit-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/grid-communications-toolkit-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  growth-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-2
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/growth-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/growth-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  health-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-2
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/health-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/health-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  home-affairs-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-2
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/home-affairs-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/home-affairs-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  horizon2020-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-2
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/horizon2020-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/horizon2020-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  iee-projects-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-2
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/iee-projects-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/iee-projects-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  inforegio-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-2
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/inforegio-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/inforegio-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  inea-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-2
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/inea-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/inea-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  inseparable-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-2
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/inseparable-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/inseparable-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  isa-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-2
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/isa-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/isa-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  jrccties-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-2
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/jrccties-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/jrccties-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  jrcsh-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-2
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/jrcsh-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/jrcsh-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  kci-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-2
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/kci-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/kci-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  know4pol-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-2
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/know4pol-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/know4pol-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  mare-emd-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-2
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/mare-emd-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/mare-emd-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  mare-magaz-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-2
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/mare-magaz-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/mare-magaz-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  mariecurie-actions-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-2
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/mariecurie-actions-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/mariecurie-actions-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  mariecurie2-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-2
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/mariecurie2-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/mariecurie2-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  maritime-affaires-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-2
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/maritime-affaires-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/maritime-affaires-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  maritimeforum-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-3
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/maritimeforum-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/maritimeforum-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  microdata-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-3
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/microdata-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/microdata-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  migr-fisheries-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-3
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/migr-fisheries-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/migr-fisheries-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  migr-move-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-3
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/migr-move-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/migr-move-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  mossportal-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-3
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/mossportal-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/mossportal-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  n-lex-migration-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-3
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/n-lex-migration-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/n-lex-migration-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  near-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-3
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/near-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/near-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  newsroom-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-3
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/newsroom-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/newsroom-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  oil-mit-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-3
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/oil-mit-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/oil-mit-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  organic-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-3
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/organic-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/organic-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  pics-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-3
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/pics-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/pics-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  pmo-contact-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-3
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/pmo-contact-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/pmo-contact-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  ppcm-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-3
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/ppcm-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/ppcm-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  primeinfrastructure-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-3
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/primeinfrastructure-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/primeinfrastructure-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  publicare-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-3
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/publicare-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/publicare-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-austria-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-3
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-austria-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-austria-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-barcelona-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-3
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-barcelona-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-barcelona-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-belgium-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-3
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-belgium-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-belgium-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-bulgaria-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-3
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-bulgaria-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-bulgaria-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-ceskarepublika-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-3
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-ceskarepublika-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-ceskarepublika-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-croatia-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-3
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-croatia-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-croatia-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-cyprus-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-3
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-cyprus-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-cyprus-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-denmark-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-3
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-denmark-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-denmark-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-deutschland-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-3
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-deutschland-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-deutschland-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-estonia-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-4
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-estonia-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-estonia-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-finland-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-4
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-finland-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-finland-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-france-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-4
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-france-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-france-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-greece-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-4
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-greece-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-greece-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-hungary-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-4
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-hungary-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-hungary-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-ireland-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-4
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-ireland-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-ireland-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-italy-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-4
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-italy-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-italy-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-latvia-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-4
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-latvia-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-latvia-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-lietuva-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-4
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-lietuva-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-lietuva-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-luxembourg-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-4
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-luxembourg-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-luxembourg-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-malta-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-4
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-malta-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-malta-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-netherlands-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-4
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-netherlands-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-netherlands-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-polska-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-4
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-polska-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-polska-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-portugal-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-4
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-portugal-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-portugal-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-romania-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-4
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-romania-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-romania-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-slovakia-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-4
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-slovakia-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-slovakia-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-slovenia-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-4
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-slovenia-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-slovenia-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-spain-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-4
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-spain-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-spain-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-sweden-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-4
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-sweden-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-sweden-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  reps-unitedkingdom-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-4
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/reps-unitedkingdom-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/reps-unitedkingdom-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  road-safety-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-4
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/road-safety-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/road-safety-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  roma-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-4
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/roma-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/roma-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  safety_alerts-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-4
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/safety_alerts-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/safety_alerts-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  scicnet-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-4
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/scicnet-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/scicnet-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  service-catalogue-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-5
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/service-catalogue-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/service-catalogue-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  sfc2014-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-5
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/sfc2014-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/sfc2014-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  sport-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-5
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/sport-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/sport-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  srb-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-5
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/srb-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/srb-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  stages-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-5
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/stages-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/stages-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  stages2-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-5
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/stages2-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/stages2-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  taxedu-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-5
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/taxedu-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/taxedu-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  taxud-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-5
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/taxud-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/taxud-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  teachers-corner-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-5
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/teachers-corner-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/teachers-corner-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  vocational-skills-week-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-5
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/vocational-skills-week-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/vocational-skills-week-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  youthwiki-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-5
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/youthwiki-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/youthwiki-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

  youth-reference:
    image: fpfis/php71-build
    secrets: [ github_api_token ]
    when:
      status: [ success, failure ]
      matrix:
        MACHINE_NAME: machine-5
    commands:
      - ./vendor/bin/run project:create-project --repository=ec-europa/youth-reference --ansi
      - ./vendor/bin/run project:run-phpcs --repository=ec-europa/youth-reference --ansi
    volumes:
      - /cache/${DRONE_REPO_NAME}:/cache

matrix:
  MACHINE_NAME:
    - machine-1
    - machine-2
    - machine-3
    - machine-4
    - machine-5

